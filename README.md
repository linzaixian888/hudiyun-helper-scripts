## 狐蒂云自动化脚本

用于狐蒂云（szhdy.com）的自动化工具集，包含自动抢购和商品识别两个脚本。
<p float="left">
  <img src="./pic/2.jpg" width="200" />
  <img src="./pic/1.jpg" width="200" /> 
</p>

## 安装说明

1. 安装浏览器扩展 [Tampermonkey](https://www.tampermonkey.net/)
2. 打开 Tampermonkey 管理面板
3. 创建新脚本，复制对应脚本的完整代码并保存
4. 访问狐蒂云网站，脚本会自动运行

## ⚠️注意事项（必读）

- 不要同时运行两个脚本（识别.js 与 抢购.js），避免页面跳转与状态冲突
- 抢购脚本在基于三周年活动编写时只针对“页面默认配置”下单，不支持自动选择具体配置项
- 购物车可能出现重复订单：需手动删除多余订单，保留一个；进入有确认条款的购物车页后再启用抢购脚本可自动重复提交
- 抢购脚本进入“支付页”会自动暂停（可选重复提交）
- 若长时间未检测到目标，脚本会按阈值自动刷新页面；请合理设置检查间隔与刷新阈值

## 使用教程

### 流程总览

1) 先“识别”出有效商品 PID → 2) 再“抢购”这些 PID。

### 商品识别.js（先运行，可选）

目标：在一段 PID 范围内，自动跳转判定哪些是有效商品配置页，并可记录标题/价格。

操作步骤：

1. 打开任意商品页面，启动识别脚本，面板中设置：
   - 起始 PID、结束 PID
   - 检查间隔（默认 500ms）
   - 可选：勾选“获取基础价格”
2. 点击“开始”后脚本会逐个跳转检测；成功项将记录为“PID 标题 价格”并显示在面板
3. 随时可“复制/清空成功”，“清空失败”

提示：出现 404/502 等错误，脚本会先自动重试一次，仍失败才计入“失败列表”。数据持久化于 `localStorage`。

最近的三周年活动香港PID：1859，地址：
https://www.szhdy.com/cart?action=configureproduct&pid=1859

其他商品PID：
<details>
<summary>点击展开</summary>
1850 12+2香港25区 2H系列 ¥9999999.00<br>
1851 12+2香港25区 4H系列 ¥999999.00<br>
1852 12+2宁波6区-4H系列 ¥9999999.00<br>
1853 三周年 香港9区16H16G ¥111.00<br>
1854 三周年 美国2区16H16G ¥111.00<br>
1855 三周年 广州BGP16H16G ¥999999.00<br>
1856 三周年 宁波7区16H16G ¥999999.00<br>
1857 三周年 深圳2区16H16G ¥333.00<br>
1858 三周年 香港26区2H2G ¥999999.00<br>
1859 三周年 香港云服务器16H16G-1 ¥111.00<br>
1860 三周年 美国云服务器16H16G-1 ¥111.00<br>
1861 三周年 国内云服务器16H16G ¥99999999.99<br>
1862 潮州12区8H8G(YJ) ¥999999.00<br>
1863 潮州12区16H16G(YJ) ¥999999.00<br>
1864 宁波12区-4H系列 ¥80.00<br>
1865 宁波12区-8H系列 ¥150.00<br>
1866 宁波12区-16H系列 ¥200.00<br>
1867 宁波12区-32H系列 ¥350.00<br>
1868 佛山1区-4H系列 ¥80.00<br>
1869 佛山1区-8H系列 ¥150.00<br>
1870 佛山1区-16H系列 ¥200.00<br>
1871 佛山1区-32H系列 ¥350.00<br>
1872 佛山2区-4H系列 ¥100.00<br>
1873 佛山2区-8H系列 ¥200.00<br>
1874 佛山2区-16H系列 ¥300.00<br>
1875 佛山2区-32H系列 ¥450.00<br>
1876 香港34区|三网直连| 2H系列 ¥35.00<br>
1877 香港34区|三网直连| 4H系列 ¥55.00<br>
1878 香港34区|三网直连| 8H系列 ¥100.00<br>
1879 香港34区|三网直连| 16H系列 ¥250.00<br>
1880 香港34区|三网直连| 32H系列 ¥600.00<br>
1881 香港35区|精品网络| 4H系列 ¥40.00<br>
1882 香港35区|精品网络| 8H系列 ¥70.00<br>
1883 香港35区|精品网络| 16H系列 ¥120.00<br>
1884 香港35区|精品网络| 32H系列 ¥300.00<br>
1885 佛山1区8H8G(YJ) ¥999999.00<br>
1886 佛山1区16H16G(YJ) ¥999999.00<br>
1887 香港34区 16H16G(YJ) ¥9999999.00<br>
1888 香港34区 8H8G(YJ) ¥3999.00<br>
1889 香港1区16H16G(YJ) ¥999999.00<br>
1890 佛山2区8H8G(YJ) ¥3999.00<br>
1891 双11 香港34区4H4G-月 ¥99999999.00<br>
1892 双11 香港34区4H4G-年 ¥99999999.99<br>
1893 双11 香港35区8H8G-月 ¥99999999.99<br>
1894 双11 香港35区8H8G-年 ¥99999999.00<br>
1895 美国21区|精品网络| 2H系列 ¥25.00<br>
1896 美国21区|精品网络| 4H系列 ¥40.00<br>
1897 美国21区|精品网络| 8H系列 ¥70.00<br>
1898 美国21区|精品网络| 16H系列 ¥120.00<br>
1899 美国21区|精品网络| 32H系列 ¥250.00<br>
1900 双11 美国21区8H8G-月 ¥99999999.00<br>
1901 双11 美国21区8H8G-年 ¥99999999.00<br>
1902 双11 佛山2区8H8G-月 ¥99999999.00<br>
1903 双11 佛山2区8H8G-年 ¥99999999.99<br>
1904 香港35区8H8G(YJ) ¥3999.00<br>
1905 美国21区8H8G(YJ) ¥3999.00<br>
1906 香港35区16H16G(YJ) ¥3999.00<br>
1907 日本东京1区|精品网络| 2H系列 ¥15.00<br>
1908 日本东京1区|精品网络| 4H系列 ¥35.00<br>
1909 日本东京1区|精品网络| 8H系列 ¥60.00<br>
1910 日本东京1区|精品网络| 16H系列 ¥100.00<br>
1911 日本东京1区|精品网络| 32H系列 ¥300.00<br>
1912 美国25区|优化网络| 2H系列 ¥15.00<br>
1913 美国25区|优化网络| 4H系列 ¥35.00<br>
1914 美国25区|优化网络| 8H系列 ¥60.00<br>
1915 美国25区|优化网络| 16H系列 ¥100.00<br>
1916 美国24区|优化网络| 32H系列 ¥300.00<br>
1917 美国26区|精品网络| 2H系列 ¥25.00<br>
1918 美国26区|精品网络| 4H系列 ¥40.00<br>
1919 美国26区|精品网络| 8H系列 ¥70.00<br>
1920 美国26区|精品网络| 16H系列 ¥120.00<br>
1921 美国26区|精品网络| 32H系列 ¥350.00<br>
1922 三周年 顶配香港云服务器16H16G-1 ¥333.00<br>
1923 三周年 顶配美国云服务器16H16G-1 ¥99999999.99<br>
1924 西安电信9区-4H系列 ¥50.00<br>
1925 西安电信9区-8H系列 ¥100.00<br>
1926 西安电信9区-16H系列 ¥200.00<br>
1927 西安电信9区16H16G(YJ) ¥9999999.00<br>
1928 西安电信9区8H8G(YJ) ¥9999999.00<br>
1929 西安电信9区4H4G(YJ) ¥9999999.00<br>
1930 日本1区8H8G(YJ) ¥99999999.99<br>
1931 三周年 香港云服务器4H4G-2 ¥111.00<br>
1932 三周年 美国云服务器4H4G-2 ¥111.00<br>
1933 三周年 顶配日本云服务器16H16G-1 ¥333.00<br>
1934 三周年 顶配日本云服务器4H4G-2 ¥333.00<br>
1935 三周年 顶配香港云服务器4H4G-2 ¥333.00<br>
1936 北京BGP3区-4H系列 ¥60.00<br>
1937 北京BGP3区-8H系列 ¥100.00<br>
1938 北京BGP3区-16H系列 ¥200.00<br>
1939 北京BGP3区-32H系列 ¥400.00<br>
1940 美国28区|精品网络| 2H系列 ¥25.00<br>
1941 美国28区|精品网络| 4H系列 ¥40.00<br>
1942 美国28区|精品网络| 8H系列 ¥70.00<br>
1943 美国28区|精品网络| 16H系列 ¥120.00<br>
1944 美国28区|精品网络| 32H系列 ¥350.00<br>
1945 新加坡1区|精品网络| 2H系列 ¥25.00<br>
1946 新加坡1区|精品网络| 4H系列 ¥40.00<br>
1947 新加坡1区|精品网络| 8H系列 ¥70.00<br>
1948 新加坡1区|精品网络| 16H系列 ¥120.00<br>
1949 新加坡1区|精品网络| 32H系列 ¥350.00<br>
1950 三周年 北京BGP3区-16H16G ¥333.00<br>
</details>
11.17三周年最后一波更新


### 自动抢购.js（后运行）

目标：在指定检测策略与商品 PID 列表下，循环检测可购即自动点击购买/提交。

操作步骤：

1. 将识别得到的 PID 粘贴到“商品 ID（逗号分隔）”
2. 选择检测模式：
   - 全天候（all_day）：0-24h 持续检测
   - 三时间段（three_periods）：每日 7-9/13-14/17-19 运行
3. 设置检查间隔（默认 800ms）与“刷新阈值”（默认 5 次失败后刷新）
4. 可选：开启“购物车提交后重复提交”“自动关闭弹窗”“侧栏模式”
5. 点击“开始”，面板会显示状态/倒计时/失败计数

⚠️注意⚠️<br>
建议直接在已知的具体商品页面运行抢购.js，因不可控的活动页面变化，不要在活动列表页面使用！

<img src="./pic/3.jpg" width="500" />

行为规则：

- 支付页：自动暂停，不再执行任何点击(此刻才算锁单了)
- 购物车页：自动勾选支付/条款并提交（可选重复提交）
- 保护页（配置页）：不刷新，只做必要点击（如加入购物车）
- 普通商品列表：依据 `pid/gid` 或 `[data-id]/[data-gid]` 定位按钮自动点击

## 常见问题

- 看不到(没有)自动点击？
  - 检查页面是否能找到以下任一元素：
    - `.form-footer-butt[href*="pid=目标ID"]`
    - `[data-id="目标ID"] .form-footer-butt`
    - `a[href*="gid=目标ID"]`
- 识别脚本没记录标题/价格？
  - 标题/价格选择器会因活动样式变化失效，建议先只拿 PID，再人工核验
- 数据保存在哪里？
  - 抢购配置：`hudiyun_config`；抢购运行状态：`hudiyun_running`
  - 识别配置：`hudiyun_scanner_config`；成功：`hudiyun_scanner_success`；失败：`hudiyun_scanner_failed`

## 致谢与声明

- 本项目基于群友脚本拓展开发，仅用于学习与技术研究，请遵守网站规则与当地法律
- 祝大家都能买到需要的服务器
